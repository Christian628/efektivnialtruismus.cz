{% extends "theses/theses_base.html" %}

{% load wagtailcore_tags %}
{% load wagtailuserbar %}
{% load wagtailimages_tags %}
{% load menu_tags %}

{% block content %}
    <div class="row">
        <div class="col-md-9">
            <div class="row">
                <div class="col-md-12" style="text-align: center">
                    <h2>
                        Contribute with your thesis. Make use of your work and effort.
                        Help to change the world (to a better place)!
                    </h2>
                    <a href="#AvailableTheses">
                        <h2>Choose a topic</h2>
                    </a>
                </div>
                <div id="accordion" role="tablist" aria-multiselectable="true">
                    <div class="card">
                        <div class="card-header" role="tab" id="headingOne">
                            <h5 class="m-0">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
                                   aria-expanded="true" aria-controls="collapseOne">
                                    Our project
                                </a>
                            </h5>
                        </div>

                        <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
                            <div class="card-block">
                                {{ page.intro | safe }}
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" role="tab" id="headingTwo">
                            <h5 class="m-0">
                                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"
                                   aria-expanded="false" aria-controls="collapseTwo">
                                    Our topics
                                </a>
                            </h5>
                        </div>
                        <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo">
                            <div class="card-block">
                                {{ page.our_topics | safe }}
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" role="tab" id="headingThree">
                            <h5 class="m-0">
                                <a class="collapsed" data-toggle="collapse" data-parent="#accordion"
                                   href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    Process
                                </a>
                            </h5>
                        </div>
                        <div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree">
                            <div class="card-block">
                                {{ page.process | safe }}
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" role="tab" id="headingThree">
                            <h5 class="m-0">
                                <a class="collapsed" data-toggle="collapse" data-parent="#accordion"
                                   href="#collapseFour" aria-expanded="false" aria-controls="collapseThree">
                                    Propose a topic
                                </a>
                            </h5>
                        </div>
                        <div id="collapseFour" class="collapse" role="tabpanel" aria-labelledby="headingThree">
                            <div class="card-block">
                                {{ page.propose | safe }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <hr>
            <div class="row mt-3">
                <div class="col-md-12 all-tags">
                    <h3 id="AvailableTheses">Pick your study discipline</h3>
                    {% for tag in tags %}
                        <input type="checkbox" class="badgebox" name="fl-colour" value="{{ tag | slugify }}"
                               id="{{ tag | slugify }}"/>
                        <label class="btn btn-info tag-select" for="{{ tag | slugify }}">
                            {{ tag }}
                        </label>
                    {% endfor %}
                </div>
            </div>

            <div class="row">
                <div class="theses col-md-12">
                    <h3>Available theses</h3>
                    {% for thesis in theses %}
                        <div class="card thesis card-outline-info mt-2"
                             data-category="{% for tag in thesis.tags.all %}{{ tag | slugify }} {% endfor %}">
                            <div class="card-header pt-1 pb-1">
                                <h5 class="card-title m-0">
                                    <a href="{% pageurl thesis %}">
                                        {{ thesis.title }}
                                    </a>
                                    {% with thesis.provider.name as provider_name %}
                                        | {% image thesis.provider.provider_image fill-20x20 title=provider_name %}
                                    {% endwith %}
                                </h5>
                            </div>
                            <div class="card-header card-subheader pt-1 pb-1">
                                {% for tag in thesis.tags.all %}
                                    <label class="btn btn-info tag-select">{{ tag }}</label>
                                {% endfor %}

                            </div>
                            <div class="card-block pt-0 pb-0">

                                <p class="card-text">
                                    {{ thesis.description | safe | truncatewords_html:50 }}
                                </p>

                            </div>
                            <div class="card-footer text-muted pt-0 pb-0">
                                <b>Why it's important? </b>{{ thesis.why_important | safe | truncatewords_html:50 }}
                            </div>

                        </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </div>

{% endblock %}
